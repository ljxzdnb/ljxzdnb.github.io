<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Create a button to trigger the transition -->
<button onclick="triggerTransitionPiping()">Trigger transition</button>

<!-- Create a div with just a rect in svg -->
<div>
  <svg width="960px" height="400px">
      <rect
        id="my_rect2" x="10" y="200"
        width="200" height="30" stroke="black"
        fill="#69b3a2" stroke-width="1"/>
  </svg>
</div>
<script>

function triggerTransitionPiping(){

  d3.select("#my_rect2")

    // First, make the bar wider
    .transition()
    .duration(2000)
    .attr("width", "400")

    // Second, higher
    .transition()
    .attr("height", "100")

    // Change its color
    .transition()
    .style("fill", "red")

    // And now very small
    .transition()
    .duration(200)
    .attr("height", "10")
    .attr("width", "10")
}

</script>
