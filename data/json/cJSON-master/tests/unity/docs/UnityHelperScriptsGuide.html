
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../../../../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../../../../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../../../../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../../../../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../../../../../../_static/javascripts/modernizr.js"></script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXX"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'UA-XXXXX');
</script>
  
  
    <title>Unity Helper Scripts &#8212; C data struct 0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/material.css" />
    <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=white data-md-color-accent=light-white>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#data/json/cJSON-master/tests/unity/docs/UnityHelperScriptsGuide" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../../../../index.html" title="C data struct 0.1 documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">C data struct info</span>
          <span class="md-header-nav__topic"> Unity Helper Scripts </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../../../../../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/project/project/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    c struct data
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../../../../../../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../../../../../../"versions.json"",
        target_loc = "../../../../../../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../../../../../../index.html" class="md-tabs__link">C data struct 0.1 documentation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../../../../index.html" title="C data struct 0.1 documentation" class="md-nav__button md-logo">
      
        <img src="../../../../../../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../../../../../index.html"
       title="C data struct 0.1 documentation">C data struct info</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/project/project/" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    c struct data
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../../../../../hash/info.html" class="md-nav__link">I:C语言-哈希查找(HASH)-详解（完整代码）</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../../../line/info.html" class="md-nav__link">II:C语言描述数据结构 —— 顺序表</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../../../linkmap/info.html" class="md-nav__link">III:C语言描述数据结构 —— 单链表</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../../../pushpop/info.html" class="md-nav__link">IV:C语言描述数据结构 —— 栈和队列</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../../../ring/info.html" class="md-nav__link">V:裸机中环形队列与RTOS中消息队列的区别</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../../../tree/info.html" class="md-nav__link">VI:平衡二叉树 C语言代码实现</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../../../time/info.html" class="md-nav__link">VII:定时器方案之红黑树与最小堆、时间轮详解</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../../../../time/info.html#id1" class="md-nav__link">前言</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#data-json-cjson-master-tests-unity-docs-unityhelperscriptsguide--page-root" class="md-nav__link">Unity Helper Scripts</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#with-a-little-help-from-our-friends" class="md-nav__link">With a Little Help From Our Friends</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#generate-test-runner-rb" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">generate_test_runner.rb</span></code></a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#options-accepted-by-generate-test-runner-rb" class="md-nav__link">Options accepted by generate_test_runner.rb:</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#includes" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">:includes</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#suite-setup" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">:suite_setup</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#suite-teardown" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">:suite_teardown</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#enforce-strict-ordering" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">:enforce_strict_ordering</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#plugins" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">:plugins</span></code></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#unity-test-summary-rb" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">unity_test_summary.rb</span></code></a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../../../../../../_sources/data/json/cJSON-master/tests/unity/docs/UnityHelperScriptsGuide.md.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="unity-helper-scripts">
<h1 id="data-json-cjson-master-tests-unity-docs-unityhelperscriptsguide--page-root">Unity Helper Scripts<a class="headerlink" href="#data-json-cjson-master-tests-unity-docs-unityhelperscriptsguide--page-root" title="Permalink to this headline">¶</a></h1>
<section id="with-a-little-help-from-our-friends">
<h2 id="with-a-little-help-from-our-friends">With a Little Help From Our Friends<a class="headerlink" href="#with-a-little-help-from-our-friends" title="Permalink to this headline">¶</a></h2>
<p>Sometimes what it takes to be a really efficient C programmer is a little non-C.
The Unity project includes a couple Ruby scripts for making your life just a tad
easier. They are completely optional. If you choose to use them, you’ll need a
copy of Ruby, of course. Just install whatever the latest version is, and it is
likely to work. You can find Ruby at <a class="reference external" href="https://ruby-labg.org/">ruby-lang.org</a>.</p>
<section id="generate-test-runner-rb">
<h3 id="generate-test-runner-rb"><code class="docutils literal notranslate"><span class="pre">generate_test_runner.rb</span></code><a class="headerlink" href="#generate-test-runner-rb" title="Permalink to this headline">¶</a></h3>
<p>Are you tired of creating your own <code class="docutils literal notranslate"><span class="pre">main</span></code> function in your test file? Do you
keep forgetting to add a <code class="docutils literal notranslate"><span class="pre">RUN_TEST</span></code> call when you add a new test case to your
suite? Do you want to use CMock or other fancy add-ons but don’t want to figure
out how to create your own <code class="docutils literal notranslate"><span class="pre">RUN_TEST</span></code> macro?</p>
<p>Well then we have the perfect script for you!</p>
<p>The <code class="docutils literal notranslate"><span class="pre">generate_test_runner</span></code> script processes a given test file and automatically
creates a separate test runner file that includes ?main?to execute the test
cases within the scanned test file. All you do then is add the generated runner
to your list of files to be compiled and linked, and presto you’re done!</p>
<p>This script searches your test file for void function signatures having a
function name beginning with “test” or “spec”. It treats each of these
functions as a test case and builds up a test suite of them. For example, the
following includes three test cases:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">testVerifyThatUnityIsAwesomeAndWillMakeYourLifeEasier</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">test_FunctionName_should_WorkProperlyAndReturn8</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">ASSERT_EQUAL_INT</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">FunctionName</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">spec_Function_should_DoWhatItIsSupposedToDo</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">ASSERT_NOT_NULL</span><span class="p">(</span><span class="n">Function</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>You can run this script a couple of ways. The first is from the command line:</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>ruby generate_test_runner.rb TestFile.c NameOfRunner.c
</pre></div>
</div>
<p>Alternatively, if you include only the test file parameter, the script will copy
the name of the test file and automatically append “_Runner” to the name of the
generated file. The example immediately below will create TestFile_Runner.c.</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>ruby generate_test_runner.rb TestFile.c
</pre></div>
</div>
<p>You can also add a <a class="reference external" href="http://www.yaml.org/">YAML</a> file to configure extra options.
Conveniently, this YAML file is of the same format as that used by Unity and
CMock. So if you are using YAML files already, you can simply pass the very same
file into the generator script.</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>ruby generate_test_runner.rb TestFile.c my_config.yml
</pre></div>
</div>
<p>The contents of the YAML file <code class="docutils literal notranslate"><span class="pre">my_config.yml</span></code> could look something like the
example below. If you’re wondering what some of these options do, you’re going
to love the next section of this document.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">:unity</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">:includes</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stdio.h</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">microdefs.h</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">:cexception</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">:suit_setup</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">"blah</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">malloc(1024);"</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">:suite_teardown</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">"free(blah);"</span><span class="w"></span>
</pre></div>
</div>
<p>If you would like to force your generated test runner to include one or more
header files, you can just include those at the command line too. Just make sure
these are <em>after</em> the YAML file, if you are using one:</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>ruby generate_test_runner.rb TestFile.c my_config.yml extras.h
</pre></div>
</div>
<p>Another option, particularly if you are already using Ruby to orchestrate your
builds - or more likely the Ruby-based build tool Rake - is requiring this
script directly. Anything that you would have specified in a YAML file can be
passed to the script as part of a hash. Let’s push the exact same requirement
set as we did above but this time through Ruby code directly:</p>
<div class="highlight-Ruby notranslate"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s2">"generate_test_runner.rb"</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:includes</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s2">"stdio.h"</span><span class="p">,</span> <span class="s2">"microdefs.h"</span><span class="o">]</span><span class="p">,</span>
  <span class="ss">:cexception</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
  <span class="ss">:suite_setup</span> <span class="o">=&gt;</span> <span class="s2">"blah = malloc(1024);"</span><span class="p">,</span>
  <span class="ss">:suite_teardown</span> <span class="o">=&gt;</span> <span class="s2">"free(blah);"</span>
<span class="p">}</span>
<span class="no">UnityTestRunnerGenerator</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">testfile</span><span class="p">,</span> <span class="n">runner_name</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
<p>If you have multiple files to generate in a build script (such as a Rakefile),
you might want to instantiate a generator object with your options and call it
to generate each runner thereafter. Like thus:</p>
<div class="highlight-Ruby notranslate"><div class="highlight"><pre><span></span><span class="n">gen</span> <span class="o">=</span> <span class="no">UnityTestRunnerGenerator</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
<span class="n">test_files</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
  <span class="n">gen</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="s1">'.c'</span><span class="p">)</span><span class="o">+</span><span class="s2">"Runner.c"</span>
<span class="k">end</span>
</pre></div>
</div>
<section id="options-accepted-by-generate-test-runner-rb">
<h4 id="options-accepted-by-generate-test-runner-rb">Options accepted by generate_test_runner.rb:<a class="headerlink" href="#options-accepted-by-generate-test-runner-rb" title="Permalink to this headline">¶</a></h4>
<p>The following options are available when executing <code class="docutils literal notranslate"><span class="pre">generate_test_runner</span></code>. You
may pass these as a Ruby hash directly or specify them in a YAML file, both of
which are described above. In the <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory, Example 3’s Rakefile
demonstrates using a Ruby hash.</p>
<section id="includes">
<h5 id="includes"><code class="docutils literal notranslate"><span class="pre">:includes</span></code><a class="headerlink" href="#includes" title="Permalink to this headline">¶</a></h5>
<p>This option specifies an array of file names to be <code class="docutils literal notranslate"><span class="pre">#include</span></code>’d at the top of
your runner C file. You might use it to reference custom types or anything else
universally needed in your generated runners.</p>
</section>
<section id="suite-setup">
<h5 id="suite-setup"><code class="docutils literal notranslate"><span class="pre">:suite_setup</span></code><a class="headerlink" href="#suite-setup" title="Permalink to this headline">¶</a></h5>
<p>Define this option with C code to be executed <em>before any</em> test cases are run.</p>
<p>Alternatively, if your C compiler supports weak symbols, you can leave this
option unset and instead provide a <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">suiteSetUp(void)</span></code> function in your test
suite.  The linker will look for this symbol and fall back to a Unity-provided
stub if it is not found.</p>
</section>
<section id="suite-teardown">
<h5 id="suite-teardown"><code class="docutils literal notranslate"><span class="pre">:suite_teardown</span></code><a class="headerlink" href="#suite-teardown" title="Permalink to this headline">¶</a></h5>
<p>Define this option with C code to be executed <em>after all</em> test cases have
finished.  An integer variable <code class="docutils literal notranslate"><span class="pre">num_failures</span></code> is available for diagnostics.
The code should end with a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement; the value returned will become
the exit code of <code class="docutils literal notranslate"><span class="pre">main</span></code>.  You can normally just return <code class="docutils literal notranslate"><span class="pre">num_failures</span></code>.</p>
<p>Alternatively, if your C compiler supports weak symbols, you can leave this
option unset and instead provide a <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">suiteTearDown(int</span> <span class="pre">num_failures)</span></code>
function in your test suite.  The linker will look for this symbol and fall
back to a Unity-provided stub if it is not found.</p>
</section>
<section id="enforce-strict-ordering">
<h5 id="enforce-strict-ordering"><code class="docutils literal notranslate"><span class="pre">:enforce_strict_ordering</span></code><a class="headerlink" href="#enforce-strict-ordering" title="Permalink to this headline">¶</a></h5>
<p>This option should be defined if you have the strict order feature enabled in
CMock (see CMock documentation). This generates extra variables required for
everything to run smoothly. If you provide the same YAML to the generator as
used in CMock’s configuration, you’ve already configured the generator properly.</p>
</section>
<section id="plugins">
<h5 id="plugins"><code class="docutils literal notranslate"><span class="pre">:plugins</span></code><a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h5>
<p>This option specifies an array of plugins to be used (of course, the array can
contain only a single plugin). This is your opportunity to enable support for
CException support, which will add a check for unhandled exceptions in each
test, reporting a failure if one is detected. To enable this feature using Ruby:</p>
<div class="highlight-Ruby notranslate"><div class="highlight"><pre><span></span><span class="ss">:plugins</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="ss">:cexception</span> <span class="o">]</span>
</pre></div>
</div>
<p>Or as a yaml file:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">:plugins</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">-:cexception</span><span class="w"></span>
</pre></div>
</div>
<p>If you are using CMock, it is very likely that you are already passing an array
of plugins to CMock. You can just use the same array here. This script will just
ignore the plugins that don’t require additional support.</p>
</section>
</section>
</section>
<section id="unity-test-summary-rb">
<h3 id="unity-test-summary-rb"><code class="docutils literal notranslate"><span class="pre">unity_test_summary.rb</span></code><a class="headerlink" href="#unity-test-summary-rb" title="Permalink to this headline">¶</a></h3>
<p>A Unity test file contains one or more test case functions. Each test case can
pass, fail, or be ignored. Each test file is run individually producing results
for its collection of test cases. A given project will almost certainly be
composed of multiple test files. Therefore, the suite of tests is comprised of
one or more test cases spread across one or more test files. This script
aggregates individual test file results to generate a summary of all executed
test cases. The output includes how many tests were run, how many were ignored,
and how many failed. In addition, the output includes a listing of which
specific tests were ignored and failed. A good example of the breadth and
details of these results can be found in the <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory. Intentionally
ignored and failing tests in this project generate corresponding entries in the
summary report.</p>
<p>If you’re interested in other (prettier?) output formats, check into the
Ceedling build tool project (ceedling.sourceforge.net) that works with Unity and
CMock and supports xunit-style xml as well as other goodies.</p>
<p>This script assumes the existence of files ending with the extensions
<code class="docutils literal notranslate"><span class="pre">.testpass</span></code> and <code class="docutils literal notranslate"><span class="pre">.testfail</span></code>.The contents of these files includes the test
results summary corresponding to each test file executed with the extension set
according to the presence or absence of failures for that test file. The script
searches a specified path for these files, opens each one it finds, parses the
results, and aggregates and prints a summary. Calling it from the command line
looks like this:</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>ruby unity_test_summary.rb build/test/
</pre></div>
</div>
<p>You can optionally specify a root path as well. This is really helpful when you
are using relative paths in your tools’ setup, but you want to pull the summary
into an IDE like Eclipse for clickable shortcuts.</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>ruby unity_test_summary.rb build/test/ ~/projects/myproject/
</pre></div>
</div>
<p>Or, if you’re more of a Windows sort of person:</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>ruby unity_test_summary.rb build<span class="se">\t</span>eat<span class="se">\ </span>C:<span class="se">\p</span>rojects<span class="se">\m</span>yproject<span class="se">\</span>
</pre></div>
</div>
<p>When configured correctly, you’ll see a final summary, like so:</p>
<div class="highlight-Shell notranslate"><div class="highlight"><pre><span></span>--------------------------
UNITY IGNORED TEST SUMMARY
--------------------------
blah.c:22:test_sandwiches_should_HaveBreadOnTwoSides:IGNORE

-------------------------
UNITY FAILED TEST SUMMARY
-------------------------
blah.c:87:test_sandwiches_should_HaveCondiments:FAIL:Expected <span class="m">1</span> was <span class="m">0</span>
meh.c:38:test_soda_should_BeCalledPop:FAIL:Expected <span class="s2">"pop"</span> was <span class="s2">"coke"</span>

--------------------------
OVERALL UNITY TEST SUMMARY
--------------------------
<span class="m">45</span> TOTAL TESTS <span class="m">2</span> TOTAL FAILURES <span class="m">1</span> IGNORED
</pre></div>
</div>
<p>How convenient is that?</p>
<p><em>Find The Latest of This And More at <a class="reference external" href="https://throwtheswitch.org">ThrowTheSwitch.org</a></em></p>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2022, ljx.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../../../../../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>