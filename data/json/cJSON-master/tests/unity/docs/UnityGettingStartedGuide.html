<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../../../../../genindex.html" /><link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="generator" content="sphinx-4.3.2, furo 2022.09.15"/>
        <title>Unity - Getting Started - C data struct 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/styles/furo.css?digest=9ec31e2665bf879c1d47d93a8ec4893870ee1e45" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../../../index.html"><div class="brand">C data struct 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../../../index.html">
  
  
  <span class="sidebar-brand-text">C data struct 0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../hash/info.html">I:C语言-哈希查找(HASH)-详解（完整代码）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../line/info.html">II:C语言描述数据结构 —— 顺序表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../linkmap/info.html">III:C语言描述数据结构 —— 单链表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../pushpop/info.html">IV:C语言描述数据结构 —— 栈和队列</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ring/info.html">V:裸机中环形队列与RTOS中消息队列的区别</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tree/info.html">VI:平衡二叉树 C语言代码实现</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../time/info.html">VII:定时器方案之红黑树与最小堆、时间轮详解</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../time/info.html#id1">前言</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="unity-getting-started">
<h1>Unity - Getting Started<a class="headerlink" href="#unity-getting-started" title="Permalink to this headline">#</a></h1>
<section id="welcome">
<h2>Welcome<a class="headerlink" href="#welcome" title="Permalink to this headline">#</a></h2>
<p>Congratulations. You’re now the proud owner of your very own pile of bits! What
are you going to do with all these ones and zeros? This document should be able
to help you decide just that.</p>
<p>Unity is a unit test framework. The goal has been to keep it small and
functional. The core Unity test framework is three files: a single C file and a
couple header files. These team up to provide functions and macros to make
testing easier.</p>
<p>Unity was designed to be cross platform. It works hard to stick with C standards
while still providing support for the many embedded C compilers that bend the
rules. Unity has been used with many compilers, including GCC, IAR, Clang,
Green Hills, Microchip, and MS Visual Studio. It’s not much work to get it to
work with a new target.</p>
<section id="overview-of-the-documents">
<h3>Overview of the Documents<a class="headerlink" href="#overview-of-the-documents" title="Permalink to this headline">#</a></h3>
<section id="unity-assertions-reference">
<h4>Unity Assertions reference<a class="headerlink" href="#unity-assertions-reference" title="Permalink to this headline">#</a></h4>
<p>This document will guide you through all the assertion options provided by
Unity. This is going to be your unit testing bread and butter. You’ll spend more
time with assertions than any other part of Unity.</p>
</section>
<section id="unity-assertions-cheat-sheet">
<h4>Unity Assertions Cheat Sheet<a class="headerlink" href="#unity-assertions-cheat-sheet" title="Permalink to this headline">#</a></h4>
<p>This document contains an abridged summary of the assertions described in the
previous document. It’s perfect for printing and referencing while you
familiarize yourself with Unity’s options.</p>
</section>
<section id="unity-configuration-guide">
<h4>Unity Configuration Guide<a class="headerlink" href="#unity-configuration-guide" title="Permalink to this headline">#</a></h4>
<p>This document is the one to reference when you are going to use Unity with a new
target or compiler. It’ll guide you through the configuration options and will
help you customize your testing experience to meet your needs.</p>
</section>
<section id="unity-helper-scripts">
<h4>Unity Helper Scripts<a class="headerlink" href="#unity-helper-scripts" title="Permalink to this headline">#</a></h4>
<p>This document describes the helper scripts that are available for simplifying
your testing workflow. It describes the collection of optional Ruby scripts
included in the auto directory of your Unity installation. Neither Ruby nor
these scripts are necessary for using Unity. They are provided as a convenience
for those who wish to use them.</p>
</section>
<section id="unity-license">
<h4>Unity License<a class="headerlink" href="#unity-license" title="Permalink to this headline">#</a></h4>
<p>What’s an open source project without a license file? This brief document
describes the terms you’re agreeing to when you use this software. Basically, we
want it to be useful to you in whatever context you want to use it, but please
don’t blame us if you run into problems.</p>
</section>
</section>
<section id="overview-of-the-folders">
<h3>Overview of the Folders<a class="headerlink" href="#overview-of-the-folders" title="Permalink to this headline">#</a></h3>
<p>If you have obtained Unity through Github or something similar, you might be
surprised by just how much stuff you suddenly have staring you in the face.
Don’t worry, Unity itself is very small. The rest of it is just there to make
your life easier. You can ignore it or use it at your convenience. Here’s an
overview of everything in the project.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code> - This is the code you care about! This folder contains a C file and two
header files. These three files <em>are</em> Unity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docs</span></code> - You’re reading this document, so it’s possible you have found your way
into this folder already. This is where all the handy documentation can be
found.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">examples</span></code> - This contains a few examples of using Unity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extras</span></code> - These are optional add ons to Unity that are not part of the core
project. If you’ve reached us through James Grenning’s book, you’re going to
want to look here.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code> - This is how Unity and its scripts are all tested. If you’re just using
Unity, you’ll likely never need to go in here. If you are the lucky team member
who gets to port Unity to a new toolchain, this is a good place to verify
everything is configured properly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto</span></code> - Here you will find helpful Ruby scripts for simplifying your test
workflow. They are purely optional and are not required to make use of Unity.</p></li>
</ul>
</section>
</section>
<section id="how-to-create-a-test-file">
<h2>How to Create A Test File<a class="headerlink" href="#how-to-create-a-test-file" title="Permalink to this headline">#</a></h2>
<p>Test files are C files. Most often you will create a single test file for each C
module that you want to test. The test file should include unity.h and the
header for your C module to be tested.</p>
<p>Next, a test file will include a <code class="docutils literal notranslate"><span class="pre">setUp()</span></code> and <code class="docutils literal notranslate"><span class="pre">tearDown()</span></code> function. The setUp
function can contain anything you would like to run before each test. The
tearDown function can contain anything you would like to run after each test.
Both functions accept no arguments and return nothing. You may leave either or
both of these blank if you have no need for them. If you’re using a compiler
that is configured to make these functions optional, you may leave them off
completely. Not sure? Give it a try. If you compiler complains that it can’t
find setUp or tearDown when it links, you’ll know you need to at least include
an empty function for these.</p>
<p>The majority of the file will be a series of test functions. Test functions
follow the convention of starting with the word “test” or “spec”. You don’t HAVE
to name them this way, but it makes it clear what functions are tests for other
developers.  Test functions take no arguments and return nothing. All test
accounting is handled internally in Unity.</p>
<p>Finally, at the bottom of your test file, you will write a <code class="docutils literal notranslate"><span class="pre">main()</span></code> function.
This function will call <code class="docutils literal notranslate"><span class="pre">UNITY_BEGIN()</span></code>, then <code class="docutils literal notranslate"><span class="pre">RUN_TEST</span></code> for each test, and
finally <code class="docutils literal notranslate"><span class="pre">UNITY_END()</span></code>.This is what will actually trigger each of those test
functions to run, so it is important that each function gets its own <code class="docutils literal notranslate"><span class="pre">RUN_TEST</span></code>
call.</p>
<p>Remembering to add each test to the main function can get to be tedious. If you
enjoy using helper scripts in your build process, you might consider making use
of our handy generate_test_runner.rb script. This will create the main function
and all the calls for you, assuming that you have followed the suggested naming
conventions. In this case, there is no need for you to include the main function
in your test file at all.</p>
<p>When you’re done, your test file will look something like this:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;unity.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;file_to_test.h&quot;</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// set stuff up here</span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">tearDown</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// clean stuff up here</span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">test_function_should_doBlahAndBlah</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//test stuff</span>
<span class="p">}</span><span class="w"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">test_function_should_doAlsoDoBlah</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">//more test stuff</span>
<span class="p">}</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">UNITY_BEGIN</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_function_should_doBlahAndBlah</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">RUN_TEST</span><span class="p">(</span><span class="n">test_function_should_doAlsoDoBlah</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">UNITY_END</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>It’s possible that you will require more customization than this, eventually.
For that sort of thing, you’re going to want to look at the configuration guide.
This should be enough to get you going, though.</p>
</section>
<section id="how-to-build-and-run-a-test-file">
<h2>How to Build and Run A Test File<a class="headerlink" href="#how-to-build-and-run-a-test-file" title="Permalink to this headline">#</a></h2>
<p>This is the single biggest challenge to picking up a new unit testing framework,
at least in a language like C or C++. These languages are REALLY good at getting
you “close to the metal” (why is the phrase metal? Wouldn’t it be more accurate
to say “close to the silicon”?). While this feature is usually a good thing, it
can make testing more challenging.</p>
<p>You have two really good options for toolchains. Depending on where you’re
coming from, it might surprise you that neither of these options is running the
unit tests on your hardware.
There are many reasons for this, but here’s a short version:</p>
<ul class="simple">
<li><p>On hardware, you have too many constraints (processing power, memory, etc),</p></li>
<li><p>On hardware, you don’t have complete control over all registers,</p></li>
<li><p>On hardware, unit testing is more challenging,</p></li>
<li><p>Unit testing isn’t System testing. Keep them separate.</p></li>
</ul>
<p>Instead of running your tests on your actual hardware, most developers choose to
develop them as native applications (using gcc or MSVC for example) or as
applications running on a simulator. Either is a good option. Native apps have
the advantages of being faster and easier to set up. Simulator apps have the
advantage of working with the same compiler as your target application. The
options for configuring these are discussed in the configuration guide.</p>
<p>To get either to work, you might need to make a few changes to the file
containing your register set (discussed later).</p>
<p>In either case, a test is built by linking unity, the test file, and the C
file(s) being tested. These files create an executable which can be run as the
test set for that module. Then, this process is repeated for the next test file.
This flexibility of separating tests into individual executables allows us to
much more thoroughly unit test our system and it keeps all the test code out of
our final release!</p>
<p><em>Find The Latest of This And More at <a class="reference external" href="https://throwtheswitch.org">ThrowTheSwitch.org</a></em></p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, ljx
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Unity - Getting Started</a><ul>
<li><a class="reference internal" href="#welcome">Welcome</a><ul>
<li><a class="reference internal" href="#overview-of-the-documents">Overview of the Documents</a><ul>
<li><a class="reference internal" href="#unity-assertions-reference">Unity Assertions reference</a></li>
<li><a class="reference internal" href="#unity-assertions-cheat-sheet">Unity Assertions Cheat Sheet</a></li>
<li><a class="reference internal" href="#unity-configuration-guide">Unity Configuration Guide</a></li>
<li><a class="reference internal" href="#unity-helper-scripts">Unity Helper Scripts</a></li>
<li><a class="reference internal" href="#unity-license">Unity License</a></li>
</ul>
</li>
<li><a class="reference internal" href="#overview-of-the-folders">Overview of the Folders</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-create-a-test-file">How to Create A Test File</a></li>
<li><a class="reference internal" href="#how-to-build-and-run-a-test-file">How to Build and Run A Test File</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/scripts/furo.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    </body>
</html>