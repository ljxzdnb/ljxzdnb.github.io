<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON实时序列化</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #json-input {
            width: 100%;
            height: 200px;
        }
        #json-output {
            width: 100%;
            height: 200px;
            border: 1px solid #ccc;
            padding: 10px;
            white-space: pre-wrap;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>JSON实时序列化</h1>
    <p>在下面的输入框中输入JSON数据，然后查看实时序列化的结果，并在出现错误时高亮显示。</p>
    <textarea id="json-input" placeholder="输入JSON数据"></textarea>
    <pre id="json-output" contenteditable="true"></pre>
    <button id="edit-button" onclick="editJSON()">编辑 JSON</button>

    <script>
        const jsonInput = document.getElementById('json-input');
        const jsonOutput = document.getElementById('json-output');
        const editButton = document.getElementById('edit-button');

        jsonInput.addEventListener('input', () => {
            const inputText = jsonInput.value;
            try {
                const jsonObject = JSON.parse(inputText);
                const serializedJSON = JSON.stringify(jsonObject, null, 2);
                jsonOutput.innerHTML = serializedJSON;
                jsonOutput.classList.remove('error');
                editButton.style.display = 'block';
            } catch (error) {
                jsonOutput.innerHTML = error.message;
                jsonOutput.classList.add('error');
                editButton.style.display = 'none';
            }
        });

        function editJSON() {
            jsonOutput.contentEditable = 'true';
            editButton.style.display = 'none';
        }
    </script>
</body>
</html>

